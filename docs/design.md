# 设计与决策说明

## 模块化拆分
- 将解析与类型工具、变更算法、版本管理从 UI 分离，保证单一职责与可测试性
- 类型集中到 `types/json.ts`，避免循环依赖

## 版本管理策略
- 使用轻量版本栈（内存 + localStorage 持久化）
- 定义“大改动”标准：长度比例与根结构变化，兼顾性能与直观性

## 交互与可用性
- 左右/上下拖拽比例，分割条具备抓手样式，持久化用户偏好
- 明暗主题颜色区分，保证白天模式的可读性
- 行级 hover 与选中高亮，提升定位体验

## 性能考虑
- 变更按路径执行最小拷贝，避免整树深拷贝
- 版本栈上限（默认 20）避免无限增长

## 兼容性保证
- 对外行为不变：输入、同步、错误定位、树操作、历史记录保持一致
- 仅内部结构重构，严格通过单元测试验证关键逻辑
